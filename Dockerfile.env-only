FROM dataelement/bisheng-backend:v2.2.0-beta2

# حذف config.yaml لإجبار التطبيق على استخدام ENV vars
RUN rm -f /app/bisheng/config.yaml 2>/dev/null || true

# تعديل settings.py لتجاهل config.yaml
RUN sed -i 's/raise KeyError/pass  # raise KeyError/g' /app/bisheng/settings.py 2>/dev/null || true

WORKDIR /app
ENTRYPOINT ["/bin/bash"]
CMD ["/app/entrypoint.sh"]
